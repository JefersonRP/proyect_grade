--TABLAS DESECHADAS PORQUE COMPLICAN MUCHO SU ESTRUCTURA PARA UN USUARIO PROMEDIO. HAY DEMASIADAS CONSIDERACIONES. TENGO QUE DISMINUIR LA COMPLEJIDAD CONVERSANDO CON CARLOS
CREATE TABLE TB_TIPODOCUMENTO(
ID INT NOT NULL,
DESCRIPCION VARCHAR (15) NOT NULL
CONSTRAINT PK_TIPODOCUMENTO PRIMARY KEY (ID)
)
INSERT INTO TB_TIPODOCUMENTO VALUES (1,'OFICIO');
INSERT INTO TB_TIPODOCUMENTO VALUES (2,'DISPOSICION');
INSERT INTO TB_TIPODOCUMENTO VALUES (3,'REQUERIMIENTO');
GO


CREATE TABLE TB_DOCUMENTO(
ID INT NOT NULL
,DESCRIPCION VARCHAR (150)
,IDTIPODOCUMENTO INT
CONSTRAINT PK_DOCUMENTO PRIMARY KEY (ID),
CONSTRAINT FK_DOCUMENTO_TIPODOCUMENTO FOREIGN KEY (IDTIPODOCUMENTO) REFERENCES TB_TIPODOCUMENTO(ID),
)
GO

CREATE TABLE TB_ARCHIVO(
ID INT NOT NULL
,IDCARPETA VARCHAR(10)
,IDDOCUMENTO INT
CONSTRAINT PK_ARCHIVO PRIMARY KEY (ID),
CONSTRAINT FK_ARCHIVO_CARPETA FOREIGN KEY (IDCARPETA) REFERENCES TB_CARPETA(ID),
CONSTRAINT FK_ARCHIVO_DOCUMENTO FOREIGN KEY (IDDOCUMENTO) REFERENCES TB_DOCUMENTO(ID)
)
GO
CREATE TABLE TB_ARCHIVODET(
IDARCHIVO INT NOT NULL,
IDDET INT NOT NULL,
PARTE INT NOT NULL,
SANGRIA INT NOT NULL,
NEGRITA INT NOT NULL,
TEXTO VARCHAR (500) NOT NULL
CONSTRAINT PK_ARCHIVODET PRIMARY KEY (IDARCHIVO,IDDET),
CONSTRAINT FK_ARCHIVODET_ARCHIVO FOREIGN KEY (IDARCHIVO) REFERENCES TB_ARCHIVO(ID)
)
GO

--PROCEDIMIENTOS ALMACENADOS

--DOCUMENTO
CREATE PROC USP_DOCUMENTO_LISTAR
AS
SELECT T1.ID,T2.DESCRIPCION AS 'TIPO',T1.DESCRIPCION FROM TB_DOCUMENTO T1 INNER JOIN TB_TIPODOCUMENTO T2 ON T1.IDTIPODOCUMENTO = T2.ID
ORDER BY T2.DESCRIPCION
GO
CREATE PROC USP_DOCUMENTO_INSERTAR
@DESCRIPCION VARCHAR(150)
,@IDTIPODOCUMENTO INT
AS
INSERT INTO TB_DOCUMENTO VALUES ((SELECT ISNULL(MAX (ID),0)+1 FROM TB_DOCUMENTO),@DESCRIPCION,@IDTIPODOCUMENTO )
GO
CREATE PROC USP_DOCUMENTO_ACTUALIZAR
@ID INT
,@DESCRIPCION VARCHAR(150)
,@IDTIPODOCUMENTO INT
AS
UPDATE TB_DOCUMENTO SET DESCRIPCION=@DESCRIPCION,IDTIPODOCUMENTO=@IDTIPODOCUMENTO WHERE ID=@ID
GO
CREATE PROC USP_DOCUMENTO_ELIMINAR
@ID INT
AS
DELETE TB_DOCUMENTO WHERE ID=@ID
GO